C51 COMPILER V9.60.0.0   DOORCODE                                                          11/01/2020 16:55:26 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DOORCODE
OBJECT MODULE PLACED IN .\Objects\doorcode.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE doorcode.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -doorcode.lst) TABS(2) OBJECT(.\Objects\doorcode.obj)

line level    source

   1          #include<reg51.h>
   2          #include<string.h>
   3          //Keypad connections
   4          sbit r1=P1^0;
   5          sbit r2=P1^1;
   6          sbit r3=P1^2;
   7          sbit r4=P1^3;
   8          sbit c1=P1^4;
   9          sbit c2=P1^5;
  10          sbit c3=P1^6;
  11          sbit c4=P1^7;
  12          //LCD control lines
  13          sbit RS = P3^0;
  14          sbit EN = P3^1;
  15          //Motor connections
  16          sbit IN1 =P3^2;
  17          sbit IN2 = P3^3;
  18          //user defined functions
  19          void lcdcmd(unsigned char); //LCD commands
  20          void lcddat(unsigned char); 
  21          void lcddisplay(unsigned char*); //LCD display
  22          unsigned char password[5]; 
  23          unsigned char correctpassword[5]="02349"; //this is the correct password
  24          void delay(int);
  25          void check();
  26          void delay (int a){
  27   1          int i,j;
  28   1          for(i=0;i<a;i++){
  29   2              for(j=0;j<255;j++);
  30   2          }
  31   1      }
  32          void main(){   
  33   1          int x=0;
  34   1          lcdcmd(0x01); //clear screen
  35   1          lcdcmd(0x38); // 5*7 matrix
  36   1          lcdcmd(0x0E); //display on, cursor blinking
  37   1          lcdcmd(0x80); //force cursor to beginning of first line
  38   1          lcddisplay("DOOR LOCK");
  39   1          lcdcmd(0xc0); //force cursor to beginning of second line
  40   1          lcddisplay("   SYSTEM");
  41   1          delay(10);
  42   1          lcdcmd(0x01); //clear screen
  43   1          lcddisplay("Enter Password");
  44   1          lcdcmd(0xc0); //force cursor to beginning of second line
  45   1          while(1){        
  46   2              r1=0;r2=1;r3=1;r4=1;        
  47   2              if(c1==0){            
  48   3                  password[x]='7';
  49   3                  lcddat('*');  
  50   3                  delay(200);
  51   3                  lcdcmd(0x06);     //shift cursor to right        
  52   3                  x++;
  53   3              }
  54   2              if(c2==0){
C51 COMPILER V9.60.0.0   DOORCODE                                                          11/01/2020 16:55:26 PAGE 2   

  55   3                  password[x]='8';
  56   3                  lcddat('*');  
  57   3                  delay(200);
  58   3                  lcdcmd(0x06);     //shift cursor to right  
  59   3                  x++;
  60   3              }
  61   2              if(c3==0){
  62   3                  password[x]='9';
  63   3                  lcddat('*');  
  64   3                  delay(200);
  65   3                  lcdcmd(0x06);      //shift cursor to right      
  66   3                  x++;
  67   3              }
  68   2              r1=1;r2=0;r3=1;r4=1;
  69   2              if(c1==0){
  70   3                  password[x]='4';
  71   3                  lcddat('*');  
  72   3                  delay(200);
  73   3                  lcdcmd(0x06);      //shift cursor to right      
  74   3                  x++;
  75   3              }
  76   2              if(c2==0){
  77   3                  password[x]='5';
  78   3                  lcddat('*');  
  79   3                  delay(200);
  80   3                  lcdcmd(0x06);      //shift cursor to right      
  81   3                  x++;
  82   3              }
  83   2              if(c3==0){
  84   3                  password[x]='6';
  85   3                  lcddat('*');  
  86   3                  delay(200);
  87   3                  lcdcmd(0x06);   //shift cursor to right         
  88   3                  x++;
  89   3              }
  90   2              r1=1;r2=1;r3=0;r4=1;
  91   2              if(c1==0){
  92   3                  password[x]='1';
  93   3                  lcddat('*');  
  94   3                  delay(200);
  95   3                  lcdcmd(0x06);       //shift cursor to right     
  96   3                  x++;
  97   3              }
  98   2              if(c2==0){
  99   3                  password[x]='2';
 100   3                  lcddat('*');  
 101   3                  delay(200);
 102   3                  lcdcmd(0x06);       //shift cursor to right     
 103   3                  x++;
 104   3              }
 105   2              if(c3==0){
 106   3                  password[x]='3';
 107   3                  lcddat('*');  
 108   3                  delay(200);
 109   3                  lcdcmd(0x06);      //shift cursor to right      
 110   3                  x++;
 111   3              }
 112   2              r1=1;r2=1;r3=1;r4=0;
 113   2              if(c2==0){
 114   3                  password[x]='0';
 115   3                  lcddat('*');  
 116   3                  delay(200);
C51 COMPILER V9.60.0.0   DOORCODE                                                          11/01/2020 16:55:26 PAGE 3   

 117   3                  lcdcmd(0x06);         //shift cursor to right   
 118   3                  x++;
 119   3              }
 120   2              if(x==5){
 121   3                  check();
 122   3                  delay(200);
 123   3                  lcdcmd(0x06);       //shift cursor to right
 124   3              }
 125   2              r4=1;
 126   2          }
 127   1      }
 128          void check(){
 129   1          if(password[0]==correctpassword[0]&&
 130   1             password[1]==correctpassword[1]&&
 131   1             password[2]==correctpassword[2]&&            //if entered password matches to set password
 132   1             password[3]==correctpassword[3]&&
 133   1             password[4]==correctpassword[4]){
 134   2                 IN1=1;
 135   2                 IN2=0;
 136   2                 lcdcmd(0x01);
 137   2                 lcdcmd(0x80);
 138   2                 lcddisplay("Password");
 139   2                 lcdcmd(0xc0);
 140   2                 lcddisplay("Matched");
 141   2                 delay(1000);
 142   2             }
 143   1             else{                                        //if password doesnt match
 144   2                 IN1=0;
 145   2                 IN2=0;
 146   2                 lcdcmd(0x01);
 147   2                 lcdcmd(0x80);
 148   2                 lcddisplay("Wrong");
 149   2                 lcdcmd(0xc0);
 150   2                 lcddisplay("Password");
 151   2                 delay(100);
 152   2             }
 153   1      }
 154          void lcdcmd(unsigned char cmd){
 155   1          P2=cmd;
 156   1          RS=0;
 157   1          EN=1;
 158   1          delay(1);
 159   1          EN=0;
 160   1      }
 161          void lcddat(unsigned char dat){
 162   1          P2=dat;
 163   1          RS=1;
 164   1          EN=1;
 165   1          delay(1);
 166   1          EN=0;
 167   1      }
 168          void lcddisplay(unsigned char *c){
 169   1        int k;  
 170   1        for(k=0;c[k]!='\0';k++){
 171   2              lcddat(c[k]);
 172   2          }
 173   1          delay(100);
 174   1      }
 175          
 176          
 177          

C51 COMPILER V9.60.0.0   DOORCODE                                                          11/01/2020 16:55:26 PAGE 4   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    618    ----
   CONSTANT SIZE    =     58    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
